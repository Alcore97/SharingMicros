"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useTranslate = exports.useDynamicLanguage = void 0;
var react_1 = require("react");
var piral_core_1 = require("piral-core");
function useDynamicLanguage(defaultSelected, load) {
    var _a = react_1.useState(defaultSelected), selected = _a[0], setSelected = _a[1];
    var _b = piral_core_1.useActions(), selectLanguage = _b.selectLanguage, setTranslations = _b.setTranslations, getTranslations = _b.getTranslations;
    react_1.useEffect(function () {
        var active = true;
        var current = getTranslations(selected);
        selectLanguage(undefined);
        load(selected, current).then(function (result) {
            if (active) {
                setTranslations(selected, result);
                selectLanguage(selected);
            }
        }, function (err) { return console.error(err); });
        return function () {
            active = false;
        };
    }, [selected]);
    return [selected, setSelected];
}
exports.useDynamicLanguage = useDynamicLanguage;
function useTranslate() {
    var translate = piral_core_1.useActions().translate;
    piral_core_1.useGlobalState(function (m) { return m.language.selected; });
    return translate;
}
exports.useTranslate = useTranslate;
//# sourceMappingURL=hooks.js.map