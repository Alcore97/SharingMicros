import { useEffect, useState } from 'react';
import { useActions, useGlobalState } from 'piral-core';
export function useDynamicLanguage(defaultSelected, load) {
    var _a = useState(defaultSelected), selected = _a[0], setSelected = _a[1];
    var _b = useActions(), selectLanguage = _b.selectLanguage, setTranslations = _b.setTranslations, getTranslations = _b.getTranslations;
    useEffect(function () {
        var active = true;
        var current = getTranslations(selected);
        selectLanguage(undefined);
        load(selected, current).then(function (result) {
            if (active) {
                setTranslations(selected, result);
                selectLanguage(selected);
            }
        }, function (err) { return console.error(err); });
        return function () {
            active = false;
        };
    }, [selected]);
    return [selected, setSelected];
}
export function useTranslate() {
    var translate = useActions().translate;
    useGlobalState(function (m) { return m.language.selected; });
    return translate;
}
//# sourceMappingURL=hooks.js.map