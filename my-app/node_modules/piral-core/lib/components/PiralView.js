"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PiralView = void 0;
var tslib_1 = require("tslib");
var React = require("react");
var react_router_1 = require("react-router");
var components_1 = require("./components");
var PiralRoutes_1 = require("./PiralRoutes");
var hooks_1 = require("../hooks");
var NotFound = function (props) { return React.createElement(components_1.PiralError, tslib_1.__assign({ type: "not_found" }, props)); };
var PiralContent = function () {
    var _a = hooks_1.useGlobalState(function (m) { return m.app; }), error = _a.error, loading = _a.loading, layout = _a.layout;
    return error ? (React.createElement(components_1.PiralError, { type: "loading", error: error })) : loading ? (React.createElement(components_1.PiralLoadingIndicator, null)) : (React.createElement(components_1.PiralLayout, { currentLayout: layout },
        React.createElement(PiralRoutes_1.PiralRoutes, { NotFound: NotFound })));
};
var Router = typeof window === 'undefined' ? function (props) { return React.createElement(react_router_1.StaticRouter, tslib_1.__assign({ location: "/" }, props)); } : components_1.PiralRouter;
var PiralProvider = function (_a) {
    var children = _a.children;
    var provider = hooks_1.useGlobalState(function (m) { return m.provider; }) || React.Fragment;
    return React.createElement(provider, undefined, children);
};
/**
 * The component responsible for the generic view of the application.
 * This includes the global providers, the used Router, the current content and some convenience.
 */
var PiralView = function (_a) {
    var children = _a.children;
    return (React.createElement(PiralProvider, null,
        React.createElement(Router, null,
            React.createElement(PiralContent, null),
            children,
            React.createElement(components_1.PiralDebug, null))));
};
exports.PiralView = PiralView;
exports.PiralView.displayName = 'PiralView';
//# sourceMappingURL=PiralView.js.map